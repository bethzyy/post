# Webç•Œé¢å‚æ•°è¾“å…¥åŠŸèƒ½è¯´æ˜

## ğŸ“… æ›´æ–°æ—¥æœŸ
2026å¹´1æœˆ29æ—¥

## âœ¨ åŠŸèƒ½æ¦‚è¿°

ä¸º**ä»Šæ—¥å¤´æ¡æ–‡ç« ç”Ÿæˆå™¨**æ·»åŠ äº†Webç•Œé¢å‚æ•°è¾“å…¥åŠŸèƒ½,ç”¨æˆ·ç°åœ¨å¯ä»¥ç›´æ¥åœ¨æµè§ˆå™¨ä¸­è¾“å…¥æ–‡ç« ä¸»é¢˜å’Œé€‰æ‹©å­—æ•°,æ— éœ€é€šè¿‡å‘½ä»¤è¡Œäº¤äº’ã€‚

## ğŸ¯ å®ç°çš„åŠŸèƒ½

### 1. åŠ¨æ€å‚æ•°è¾“å…¥ç•Œé¢

å½“ç”¨æˆ·é€‰æ‹©"ä»Šæ—¥å¤´æ¡æ–‡ç« ç”Ÿæˆå™¨"å·¥å…·æ—¶,Webç•Œé¢ä¼šè‡ªåŠ¨æ˜¾ç¤ºå‚æ•°è¾“å…¥è¡¨å•:

**æ–‡ç« ä¸»é¢˜è¾“å…¥æ¡†**:
- ç±»å‹: æ–‡æœ¬è¾“å…¥æ¡†
- å ä½ç¬¦: "å¦‚: è¿‡å¹´å›è€å®¶"
- å¿…å¡«é¡¹: æ˜¯
- ç¤ºä¾‹: "èŒåœºæ–°äººå¿…çœ‹"ã€"å¥åº·å…»ç”Ÿå°è´´å£«"

**æ–‡ç« é•¿åº¦ä¸‹æ‹‰æ¡†**:
- ç±»å‹: é€‰æ‹©æ¡†
- é€‰é¡¹:
  - 1500å­— (å¿«é€Ÿé˜…è¯»)
  - 2000å­— (æ ‡å‡†é•¿åº¦) - é»˜è®¤é€‰ä¸­
  - 2500å­— (æ·±åº¦æ–‡ç« )

### 2. å‚æ•°éªŒè¯

- ç‚¹å‡»"è¿è¡Œå·¥å…·"æŒ‰é’®æ—¶,ä¼šéªŒè¯ä¸»é¢˜æ˜¯å¦ä¸ºç©º
- å¦‚æœä¸»é¢˜ä¸ºç©º,ä¼šæ˜¾ç¤ºé”™è¯¯æç¤ºå¹¶é˜»æ­¢è¿è¡Œ
- å­—æ•°å‚æ•°æœ‰é»˜è®¤å€¼(2000),ç”¨æˆ·å¯ä»¥ä¸é€‰æ‹©

### 3. æ—¥å¿—è¾“å‡º

è¿è¡Œæ—¶ä¼šæ˜¾ç¤ºç”¨æˆ·è¾“å…¥çš„å‚æ•°:
```
[INFO] ä¸»é¢˜: è¿‡å¹´å›è€å®¶
[INFO] å­—æ•°: 2000å­—
```

## ğŸ”§ æŠ€æœ¯å®ç°

### å‰ç«¯ (tool_manager.html)

**å‚æ•°è¾“å…¥UIç”Ÿæˆ** (lines 1074-1128):
```javascript
// å½“é€‰æ‹©ä»Šæ—¥å¤´æ¡æ–‡ç« ç”Ÿæˆå™¨æ—¶
if (tool.filename === 'article/toutiao_article_generator.py' &&
    tool.input_fields && tool.input_fields.length > 0) {

    // åŠ¨æ€ç”Ÿæˆå‚æ•°è¾“å…¥è¡¨å•
    tool.input_fields.forEach(field => {
        if (field.type === 'text') {
            // ç”Ÿæˆæ–‡æœ¬è¾“å…¥æ¡†
        } else if (field.type === 'select') {
            // ç”Ÿæˆä¸‹æ‹‰é€‰æ‹©æ¡†
        }
    });
}
```

**å‚æ•°æ”¶é›†å’Œå‘é€** (lines 1164-1180):
```javascript
// æ”¶é›†æ–‡ç« ç”Ÿæˆå™¨å‚æ•°
if (currentTool.filename === 'article/toutiao_article_generator.py') {
    const theme = document.getElementById('param-theme').value;
    const length = document.getElementById('param-length').value;

    // éªŒè¯å¿…å¡«å‚æ•°
    if (!theme) {
        addLog('error', 'è¯·è¾“å…¥æ–‡ç« ä¸»é¢˜');
        return;
    }

    // æ·»åŠ åˆ°è¯·æ±‚æ•°æ®
    requestData.params = { theme: theme, length: length };
    addLog('info', `ä¸»é¢˜: ${theme}`);
    addLog('info', `å­—æ•°: ${length}å­—`);
}
```

### åç«¯ (tool_manager.py)

**å·¥å…·é…ç½®** (lines 43-54):
```python
"toutiao_article_generator.py": {
    "description": "ç”Ÿæˆå™¨ - ä»Šæ—¥å¤´æ¡æ–‡ç« ç”Ÿæˆå™¨ v2.0 (AIé©±åŠ¨,æ”¯æŒè‡ªå®šä¹‰ä¸»é¢˜)",
    "needs_input": True,
    "input_fields": [
        {
            "name": "theme",
            "label": "æ–‡ç« ä¸»é¢˜",
            "type": "text",
            "placeholder": "å¦‚: è¿‡å¹´å›è€å®¶",
            "required": True
        },
        {
            "name": "length",
            "label": "æ–‡ç« é•¿åº¦",
            "type": "select",
            "options": [
                {"value": "1500", "label": "1500å­— (å¿«é€Ÿé˜…è¯»)"},
                {"value": "2000", "label": "2000å­— (æ ‡å‡†é•¿åº¦)"},
                {"value": "2500", "label": "2500å­— (æ·±åº¦æ–‡ç« )"}
            ],
            "default": "2000"
        }
    ]
}
```

**APIå‚æ•°å¤„ç†** (lines 220-239):
```python
# æ¥æ”¶å‰ç«¯ä¼ é€’çš„å‚æ•°
if filename == 'article/toutiao_article_generator.py':
    params = data.get('params', {})
    theme = params.get('theme', '')
    length = params.get('length', '2000')

    # åˆ›å»ºä¸´æ—¶è¾“å…¥æ–‡ä»¶
    with tempfile.NamedTemporaryFile(mode='w+', delete=False,
                                     suffix='.txt', encoding='utf-8') as f:
        f.write(theme + '\n')
        f.write(length + '\n')
        temp_file = f.name

    # é€šè¿‡stdinä¼ é€’å‚æ•°ç»™Pythonè„šæœ¬
    process = subprocess.Popen(
        ['python', str(tool_path)],
        stdin=open(temp_file, 'r', encoding='utf-8'),
        stdout=subprocess.PIPE,
        stderr=subprocess.PIPE,
        cwd=BASE_DIR,
        env=env
    )
```

### å·¥å…·è„šæœ¬ (toutiao_article_generator.py)

**åŒæ¨¡å¼è¾“å…¥æ£€æµ‹** (lines 276-286):
```python
import sys
if not sys.stdin.isatty():
    # Webæ¨¡å¼ - ä»ç®¡é“è¯»å–å‚æ•°
    theme = sys.stdin.readline().strip()
    if theme:
        print(f"[Webæ¨¡å¼] ä¸»é¢˜: {theme}")
        return theme
else:
    # ç»ˆç«¯æ¨¡å¼ - äº¤äº’å¼è¾“å…¥
    theme = input("è¯·è¾“å…¥ä¸»é¢˜: ")
    return theme
```

## ğŸ“Š æ•°æ®æµç¨‹å›¾

```
ç”¨æˆ·è¾“å…¥å‚æ•°
    â†“
JavaScriptæ”¶é›† (runToolå‡½æ•°)
    â†“
fetch POST /api/run
    â†“
Flaskæ¥æ”¶ (tool_manager.py)
    â†“
åˆ›å»ºä¸´æ—¶æ–‡ä»¶
    â†“
subprocess.Popen + stdin
    â†“
Pythonè„šæœ¬è¯»å– (toutiao_article_generator.py)
    â†“
è°ƒç”¨AIç”Ÿæˆæ–‡ç« 
    â†“
è¿”å›ç»“æœåˆ°Webç•Œé¢
```

## ğŸ¨ ç•Œé¢æ•ˆæœ

### å‚æ•°è¾“å…¥åŒºåŸŸæ ·å¼:
- èƒŒæ™¯: #1e1e2e (æ·±è‰²èƒŒæ™¯)
- å·¦è¾¹æ¡†: 3px solid #5a67d8 (ç´«è‰²å¼ºè°ƒ)
- å†…è¾¹è·: 20px
- åœ†è§’: 10px
- æ ‡é¢˜é¢œè‰²: #5a67d8 (ç´«è‰²)
- è¾“å…¥æ¡†æ ·å¼: æ·±è‰²èƒŒæ™¯,æµ…è‰²æ–‡å­—,èšç„¦æ—¶ç´«è‰²è¾¹æ¡†

### è¾“å…¥æ¡†ç‰¹æ€§:
- è‡ªåŠ¨èšç„¦
- å“åº”å¼è®¾è®¡
- æ‚¬åœæ•ˆæœ
- å¿…å¡«æ ‡è®° (çº¢è‰²æ˜Ÿå·)

## ğŸš€ ä½¿ç”¨ç¤ºä¾‹

### æ­¥éª¤1: æ‰“å¼€å·¥å…·ç®¡ç†å™¨
```
è®¿é—®: http://localhost:5000
```

### æ­¥éª¤2: é€‰æ‹©å·¥å…·
```
å·¦ä¾§æ ‘å½¢å¯¼èˆª â†’ æ–‡ç« ç”Ÿæˆå·¥å…· â†’ toutiao_article_generator.py
```

### æ­¥éª¤3: è¾“å…¥å‚æ•°
```
æ–‡ç« ä¸»é¢˜: è¿‡å¹´å›è€å®¶
æ–‡ç« é•¿åº¦: 2000å­— (æ ‡å‡†é•¿åº¦)
```

### æ­¥éª¤4: è¿è¡Œå·¥å…·
```
ç‚¹å‡»"â–¶ï¸ è¿è¡Œå·¥å…·"æŒ‰é’®
```

### æ­¥éª¤5: æŸ¥çœ‹ç»“æœ
```
ç­‰å¾…AIç”Ÿæˆæ–‡ç« 
æŸ¥çœ‹æ—¥å¿—è¾“å‡º
è‡ªåŠ¨æ‰“å¼€HTMLé¢„è§ˆ
```

## âœ… å·²å®ŒæˆåŠŸèƒ½

- [x] å·¥å…·é…ç½®æ”¯æŒè¾“å…¥å­—æ®µå®šä¹‰
- [x] å‰ç«¯åŠ¨æ€ç”Ÿæˆå‚æ•°è¾“å…¥ç•Œé¢
- [x] å‚æ•°éªŒè¯(å¿…å¡«é¡¹æ£€æŸ¥)
- [x] å‚æ•°æ”¶é›†å’Œå‘é€åˆ°åç«¯
- [x] åç«¯æ¥æ”¶å’Œå¤„ç†å‚æ•°
- [x] é€šè¿‡stdinä¼ é€’ç»™Pythonè„šæœ¬
- [x] åŒæ¨¡å¼è¾“å…¥æ”¯æŒ(Web/ç»ˆç«¯)
- [x] æ—¥å¿—è¾“å‡ºæ˜¾ç¤ºå‚æ•°
- [x] ç•Œé¢æ ·å¼ç¾åŒ–

## ğŸ” ç›¸å…³æ–‡ä»¶

| æ–‡ä»¶ | ä¿®æ”¹å†…å®¹ |
|------|----------|
| `tool_manager.py` | æ·»åŠ è¾“å…¥å­—æ®µé…ç½®,å‚æ•°å¤„ç†é€»è¾‘ |
| `templates/tool_manager.html` | å‚æ•°UIç”Ÿæˆ,å‚æ•°æ”¶é›†å’ŒéªŒè¯ |
| `article/toutiao_article_generator.py` | stdinè¾“å…¥æ£€æµ‹,åŒæ¨¡å¼æ”¯æŒ |

## ğŸ’¡ æ‰©å±•æ€§

è¿™ä¸ªå‚æ•°è¾“å…¥æ¡†æ¶å¯ä»¥è½»æ¾æ‰©å±•åˆ°å…¶ä»–å·¥å…·:

### æ·»åŠ æ–°å·¥å…·çš„å‚æ•°è¾“å…¥:

1. åœ¨ `tool_manager.py` çš„ `TOOL_DESCRIPTIONS` ä¸­å®šä¹‰:
```python
"your_tool.py": {
    "description": "å·¥å…·æè¿°",
    "needs_input": True,
    "input_fields": [
        {
            "name": "param1",
            "label": "å‚æ•°1",
            "type": "text",
            "placeholder": "æç¤ºæ–‡å­—",
            "required": True
        },
        {
            "name": "param2",
            "label": "å‚æ•°2",
            "type": "select",
            "options": [
                {"value": "option1", "label": "é€‰é¡¹1"},
                {"value": "option2", "label": "é€‰é¡¹2"}
            ],
            "default": "option1"
        }
    ]
}
```

2. åœ¨ `/api/run` è·¯ç”±ä¸­æ·»åŠ å¤„ç†é€»è¾‘:
```python
if filename == 'your_tool.py':
    params = data.get('params', {})
    param1 = params.get('param1', '')
    param2 = params.get('param2', 'option1')
    # å¤„ç†å‚æ•°...
```

3. å‰ç«¯ä¼šè‡ªåŠ¨ç”Ÿæˆè¾“å…¥ç•Œé¢(æ— éœ€ä¿®æ”¹HTML)

## ğŸ¯ æ€»ç»“

é€šè¿‡è¿™ä¸ªåŠŸèƒ½çš„å®ç°,ç”¨æˆ·ç°åœ¨å¯ä»¥:
- âœ… åœ¨Webç•Œé¢ç›´æ¥è¾“å…¥æ–‡ç« ä¸»é¢˜
- âœ… é€‰æ‹©æ–‡ç« é•¿åº¦
- âœ… å®æ—¶æŸ¥çœ‹è¿è¡Œæ—¥å¿—
- âœ… æ— éœ€å‘½ä»¤è¡Œäº¤äº’
- âœ… æ›´å¥½çš„ç”¨æˆ·ä½“éªŒ

è¿™ä½¿å¾—**ä»Šæ—¥å¤´æ¡æ–‡ç« ç”Ÿæˆå™¨v2.0**æˆä¸ºäº†ä¸€ä¸ªå®Œæ•´çš„Webåº”ç”¨,ç”¨æˆ·å¯ä»¥é€šè¿‡æµè§ˆå™¨è½»æ¾ç”Ÿæˆé«˜è´¨é‡æ–‡ç« !

---

**ç‰ˆæœ¬**: v1.0
**å®Œæˆæ—¥æœŸ**: 2026-01-29
**ä½œè€…**: AIå‘æ–‡å·¥å…·ç®¡ç†å™¨
