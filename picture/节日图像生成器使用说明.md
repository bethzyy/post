# 节日主题图像生成器 - 使用说明

## 功能介绍

这是一个整合版的节日主题图像生成工具，支持用户自定义主题，使用多个AI模型生成图像并生成精美的HTML对比页面。

## 核心特性

✅ **自定义主题** - 用户可以输入任何节日主题描述
✅ **多模型生成** - 同时使用DALL-E 3、Flux、Seedream等多个模型
✅ **HTML对比页面** - 自动生成美观的对比页面，方便查看和比较
✅ **自动保存** - 所有生成的图像自动保存到带时间戳的文件夹中
✅ **自动打开** - 生成完成后自动在浏览器中打开结果页面

## 支持的模型

| 模型名称 | 类型 | 说明 |
|---------|------|------|
| **DALL-E 3** | Anti-gravity / OpenAI | 最先进的图像生成模型之一 |
| **Gemini 3 Pro Image** | Anti-gravity / Google | Google最新的图像生成模型 |
| **Flux** | Pollinations.ai | 开源高质量图像生成模型 |
| **Seedream** | 火山引擎 | 中文优化图像生成模型 |

## 使用方法

### 命令行运行

```bash
cd C:\D\CAIE_tool\MyAIProduct\draw
python generate_festival_images.py
```

### 使用步骤

1. **运行程序**
   ```bash
   python generate_festival_images.py
   ```

2. **输入主题**
   - 程序会提示："请输入生成主题"
   - 例如：`为春节生成中国风的水彩画`
   - 或者：`中秋节主题 - 月兔嫦娥，中国传统绘画风格`
   - 或者：`圣诞节主题 - 雪景、圣诞树、温馨氛围`
   - 直接按回车使用默认主题："春节主题 - 中国风水彩画"

3. **等待生成**
   - 程序会依次调用每个模型生成图像
   - 每个模型大约需要10-30秒
   - 总计约30-90秒（取决于网络速度）

4. **查看结果**
   - 生成完成后，浏览器会自动打开结果页面
   - 结果页面包含所有模型生成的图像对比

## 输出结构

```
images/
└── generated_20260128_182030/    # 时间戳文件夹
    ├── index.html                           # HTML对比报告（主页面）
    ├── DALL-E_3_Anti-gravity.png            # DALL-E 3生成的图像
    ├── Gemini_3_Pro_Image_Anti-gravity.png  # Gemini生成的图像
    ├── Flux_Pollinations.png                # Flux生成的图像
    └── Seedream_Volcano.png                 # Seedream生成的图像
```

## 主题示例

### 春节主题
```
为春节生成中国风的水彩画，红色主题，包含灯笼、鞭炮、福字等元素
```

### 中秋节主题
```
中秋节主题 - 月兔嫦娥，中国传统绘画风格，蓝色背景，温馨氛围
```

### 元宵节主题
```
元宵节主题 - 花灯、汤圆，热闹的节日场景，色彩鲜艳，中国传统风格
```

### 圣诞节主题
```
圣诞节主题 - 雪景、圣诞树、温馨氛围，水彩风格
```

### 国庆节主题
```
国庆节主题 - 天安门、烟花、红旗，庄重喜庆，中国风
```

### 自定义主题
```
你可以自由发挥想象，输入任何想要的描述，例如：
- 生日蛋糕 - 多层水果蛋糕，蜡烛，庆祝氛围
- 儿童节 - 卡通风格，气球、礼物、快乐的孩子
- 母亲节 - 康乃馨、温馨的母子场景
```

## HTML页面功能

生成的HTML页面包含：

1. **顶部统计**
   - 生成模型总数
   - 成功数量
   - 失败数量

2. **图像对比**
   - 每个模型一张卡片
   - 显示生成的图像
   - 显示模型名称和类型
   - 显示生成状态（成功/失败）
   - 显示使用的提示词

3. **重新生成**
   - 点击底部的"重新生成"按钮可以刷新页面

## 技术特点

### 1. 模块化设计
每个图像生成函数都是独立的，易于添加新模型：

```python
def generate_with_newmodel(prompt, output_path):
    """新模型生成函数"""
    # 实现生成逻辑
    pass
```

### 2. 错误处理
每个模型的生成都有独立的错误处理，一个模型失败不会影响其他模型。

### 3. 时间戳文件夹
每次运行都创建新的带时间戳的文件夹，避免覆盖之前的结果。

### 4. 自动打开
生成完成后自动在浏览器中打开结果页面，方便查看。

## 与旧工具的对比

| 特性 | 旧工具（单个） | 新工具（整合版） |
|------|---------------|-----------------|
| 主题支持 | 固定主题（拉巴赫节） | 任意自定义主题 |
| 模型数量 | 单个模型 | 多个模型（3+） |
| 对比功能 | 手动对比 | 自动HTML对比页面 |
| 用户友好 | 需要修改代码 | 交互式输入 |
| 历史记录 | 覆盖 | 保留（时间戳文件夹） |

## 已整合的旧工具

以下工具已被整合到新工具中：

- ✅ `labafestival_antigravity.py` - 拉巴赫节(anti-gravity)
- ✅ `labafestival_pollinations_ai.py` - 拉巴赫节(Pollinations)
- ✅ `labafestival_all_models_comparison.py` - 拉巴赫节全模型对比
- ✅ `labafestival_cogview3.py` - 拉巴赫节(CogView3)
- ✅ `labafestival_ai_generator.py` - 拉巴赫节生成器

这些工具仍然可以单独使用，但建议使用整合版以获得更好的体验。

## 故障排除

### 问题1: 模型生成失败

**错误信息**: `[✗] 生成失败: ...`

**可能原因**:
- API密钥未配置或已过期
- 网络连接问题
- API配额已用尽

**解决方案**:
- 检查 `.env` 文件中的API密钥配置
- 检查网络连接
- 运行 `check_quota_status.py` 查看配额状态

### 问题2: 图像保存失败

**错误信息**: `[✗] 保存图像失败: ...`

**可能原因**:
- 磁盘空间不足
- 文件夹权限问题

**解决方案**:
- 清理磁盘空间
- 检查文件夹权限

### 问题3: HTML页面无法打开

**解决方案**:
- 手动在浏览器中打开 `images/generated_xxx/index.html`
- 确保浏览器支持HTML5（Chrome、Firefox、Edge等）

## 依赖项

```bash
pip install flask
pip install requests
pip install pillow
```

这些依赖项通常已经安装，如果缺少可以通过上述命令安装。

## 未来改进

计划中的功能改进：

- [ ] 支持更多图像生成模型（Midjourney、Stable Diffusion等）
- [ ] 添加图像质量评分
- [ ] 支持批量生成（一次生成多张）
- [ ] 添加更多主题模板
- [ ] 支持图像编辑功能（裁剪、滤镜等）
- [ ] 添加图像分享功能

## 更新日志

### v1.0.0 (2026-01-28)
- ✅ 初始版本发布
- ✅ 支持4个模型（DALL-E 3、Gemini、Flux、Seedream）
- ✅ 自定义主题输入
- ✅ HTML对比页面生成
- ✅ 自动保存和时间戳
- ✅ 整合了5个旧工具

---

**享受生成图像的乐趣！** 🎨🎉
